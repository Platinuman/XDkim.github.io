<html>
<head>
<link rel="stylesheet" type="text/css" href="devin.css">
<script type="text/javascript" src="ai.js"></script>
<script src="//d3js.org/d3.v4.min.js"></script>
</head>

<body>

<div class = "title">Title</div>
<div class = "graph">Productivity Forecast
<div class = "firstG">
<svg width="300" height="200"></svg>
<script>
var n = 40,
    random = d3.randomNormal(0, .2),
    data = d3.range(n).map(random);
var svg = d3.select("svg"),
    margin = {top: 20, right: 20, bottom: 20, left: 40},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom,
    g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
var x = d3.scaleLinear()
    .domain([0, n - 1])
    .range([0, width]);
var y = d3.scaleLinear()
    .domain([-1, 1])
    .range([height, 0]);
var line = d3.line()
    .x(function(d, i) { return x(i); })
    .y(function(d, i) { return y(d); });
g.append("defs").append("clipPath")
    .attr("id", "clip")
  .append("rect")
    .attr("width", width)
    .attr("height", height);
g.append("g")
    .attr("class", "axis axis--x")
    .attr("transform", "translate(0," + y(0) + ")")
    .call(d3.axisBottom(x));
g.append("g")
    .attr("class", "axis axis--y")
    .call(d3.axisLeft(y));
g.append("g")
    .attr("clip-path", "url(#clip)")
  .append("path")
    .datum(data)
    .attr("class", "line")
  .transition()
    .duration(200)
    .ease(d3.easeLinear)
    .on("start", tick);
function tick() {
  // Push a new data point onto the back.
  data.push(random());
  // Redraw the line.
  d3.select(this)
      .attr("d", line)
      .attr("transform", null);
  // Slide it to the left.
  d3.active(this)
      .attr("transform", "translate(" + x(-1) + ",0)")
    .transition()
      .on("start", tick);
  // Pop the old data point off the front.
  data.shift();
}
</script>

</div>

<div class = "secondG">Graph 2 


</div>
</div>

<div class = "circle">Circles
<script>
function $(id){
	return document.getElementById(id);
}
var canvas = $('can');
var context = canvas.getContext('2d');
var mouseDown = false;
var circlesMoving = -1;
var circleCoords = [300,300];
var circleTexts = ["0\t 1\t 2\t 3\t 4\t 5\t 6\t 7\t 8\t 9\t 10\t 11\t 12\t 13\t 14\t 15\t 16\t 17\t 18\t 19\t 20\t 21\t 22\t 23\t", "0\t\t\t\t\t\t1\t\t\t\t\t\t2\t\t\t\t\t\t3\t\t\t\t\t\t4\t\t\t\t\t\t5\t\t\t\t\t\t6\t\t\t\t\t\t7\t\t\t\t\t\t8\t\t\t\t\t\t9\t\t\t\t\t\t10\t\t\t\t\t\t11\t\t\t\t\t\t12+\t\t\t\t\t\t", "Mon\t\t\t\t\t\t\t\tTue\t\t\t\t\t\t\t\tWed\t\t\t\t\t\t\t\tThu\t\t\t\t\t\t\t\tFri\t\t\t\t\t\t\t\tSat\t\t\t\t\t\t\t\tSun\t\t\t\t\t\t\t\t"];
var circleRads = [200,250,300];
var textStartRads = [0,0,0];
var circleColors = ['#61c8d6','#c6da3f','#ed3594'];
var lastAng = 0;
var lineAngle = 0;
function getWeekdayInt(){
   var f = getWheelFloat(2);
   var fScaled = f * 7;
   return getClosestInt(fScaled) % 7;
}
function getHoursSleptInt(){
    var f = getWheelFloat(1);
   var fScaled = f * 13;
   return getClosestInt(fScaled) % 13;
}
function getTimeOfDayInt(){
    var f = getWheelFloat(0);
   var fScaled = f * 24;
   return getClosestInt(fScaled) % 24;
}
function getWeekdayFloat(){
   return getWeekdayInt() / 6;
}
function getHoursSleptFloat(){
   return getHoursSleptInt() / 12;
}
function getTimeOfDayFloat(){
   return getTimeOfDayInt() / 23;
}
function getWheelFloat(n){
   var tR = textStartRads[n];
   while(tR > Math.PI * 2){
      tR -= Math.PI * 2;
   }
   while(tR < 0){
      tR += Math.PI * 2;
   }
   return (Math.PI * 2 - tR) / (Math.PI * 2);
}
function drawCircle(x,y,radius,color){
	context.beginPath();
	context.arc(x, y, radius, 0, 2 * Math.PI);
	changeColor(color);
	context.fill();
	changeColor('#000000');
	context.stroke();
}
CanvasRenderingContext2D.prototype.fillTextCircle = function(text,x,y,radius,startRotation){
   var numRadsPerLetter = 2 * Math.PI / text.length;
   this.save();
   this.translate(x,y);
   this.rotate(startRotation);

   for(var i=0;i<text.length;i++){
      this.save();
      this.rotate(i*numRadsPerLetter);

      this.fillText(text[i],0,-radius);
      this.restore();
   }
   this.restore();
}
function startCanvas(){
   //console.log('here');
   canvas.width = document.body.clientWidth-50;
   canvas.height = document.body.clientHeight-100;
   canvas.addEventListener('mousedown', mouseDowned, false);
   canvas.addEventListener('mousemove', mouseMoved, false);
   canvas.addEventListener('mouseup',mouseLifted,false);
   addCircles();
}
function mouseDowned(event){
   //console.log(getHoursSleptFloat());
   mouseDown = true;
   var x = event.pageX;
   var y = event.pageY;
   var d = distToCenter(x,y);
   circleMoving = -1;
   var i;
   for(i = circleRads.length - 1; i > -1; i--){
      if(d >= circleRads[i]){
         break;
      }
      circleMoving = i;
   }
   if(circleMoving > -1){
      lastAng = Math.atan((y - circleCoords[1]) / (x - circleCoords[0]));
   }
}
function mouseMoved(event){
   if(!mouseDown || circleMoving == -1)
      return;
   var x = event.pageX;
   var y = event.pageY;
   ang = Math.atan((y - circleCoords[1]) / (x - circleCoords[0]));
   angDif = ang - lastAng;
   textStartRads[circleMoving] += angDif;
   lastAng = ang;
   addCircles();
}
function mouseLifted(event){
   mouseDown = false;
}
function changeColor(color){
   context.fillStyle = color;
}
function addCircles(){
   clearCanvas();
   var i;
   for(i = circleRads.length - 1; i > -1; i--){
      drawCircle(circleCoords[0], circleCoords[1], circleRads[i], circleColors[i]);
      context.font = "bold 20px Serif";
      context.fillTextCircle(circleTexts[i],circleCoords[0],circleCoords[1],circleRads[i] - 20,textStartRads[i]);
   }
   changeColor('#000000');
   context.beginPath();
   context.moveTo(300,300);
   context.lineTo(300,0);
   context.stroke();
   context.closePath();
}
function clearCanvas(){
   canvas.getContext("2d").clearRect(0,0,canvas.width,canvas.height);
}
function distToCenter(x, y){
   return Math.sqrt((circleCoords[0] + 25 - x) * (circleCoords[0] + 25 - x) + (circleCoords[1] + 75 - y) * (circleCoords[1] + 75 - y));
}
function getClosestInt(f){
   return Math.round(f);
}
startCanvas();</script>

</div>

<div class = "text">
	<div class = "day">day of the week
	<p>This is p 1.</p>
<p>This is p 2.</p>

<p>This is p 1.</p>
<p>This is p 2.</p></div>
	<div class = "sleep">sleep
	<p>This is p 1.</p>
<p>This is p 2.</p>

<p>This is p 1.</p>
<p>This is p 2.</p></div>
	<div class = "time">time
	<p>This is p 1.</p>
<p>This is p 2.</p>

<p>This is p 1.</p>
<p>This is p 2.</p></div>
</div>




</body>
</html>